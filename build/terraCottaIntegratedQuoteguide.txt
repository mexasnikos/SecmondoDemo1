
 terraCotta Integrated Quote Guide 
INTRODUCTION 
The Integrated Quote functionality allows the clients to fully integrate the terraCotta Quote engine into their websites and booking process, allowing for full control and flexibility. 
It uses SOAP web services that allow the user to get the quote criteria elements options, obtain quotes for the desired criteria, update the quote details and subsequently book a policy. 
This guide covers the following: 
•	• Process Overview – It will explain how the process of integrating your website with terraCotta Integrated Quote web service works and list the available web services. 

•	• Integrated Quote Methods – It will explain each of the available web methods, where they fit in the integrated quote process and detail their requests and responses. 

INTEGRATED QUOTE WEB SERVICES 
Process Overview 
The process of integration into terraCotta is separated into the following steps: 
1. Request for quotations – Request a list of quotes that will fit the customer’s quote criteria for the products available to the user. 

2. Quote for Additional Covers – Once a quote is selected, it will be necessary to obtain a list of possible additional covers to offer to the customer to complement his policy. 

3. Obtain Screening Questions – After completing his quote including any selected additional covers, the customer will need to answer the screening questions for the selected product. This will define if the policy can be sold and if any medical screening is required. 

4. Save a quote as a Live policy – Once all the details have been requested from your customer and the customer has successfully paid for his policy on the client’s website, the quote originally saved can be converted into a Live Credit Card policy. 

The functionality for these steps is included in the following web-service: 
•	• Integrated Quote web-service – This service includes all the functionality that allows you to request a list of quotes, update an existing quote and convert the quote into a Live policy. 

http://www.asuaonline.com/ws/integratedquote.asmx 
The following sections will now go into detail on each of the web-services methods utilised for each of the steps detailed in the process overview. 
1. Request for quotations 
Once the customer has selected his quote criteria from the available options, a request can be sent into terraCotta to obtain quotations. 
This can be achieved by calling the ‘ProvideQuotation’ method to obtain a list of possible quotes for the desired criteria. 
To do so, the web method should be called with the following request details, which include the type of products to be quoted, the list of people to be insured and the terraCotta user: 
•	• userID – The user ID to associate the quotes to and that will define the possible products to be quoted 
•	• userCode – The user code to validate the user requesting the quotes. This can be taken from user’s direct URL, available in terraCotta’s ‘Company Admin’ 
•	• quoteDetails o ResidenceID – Residence ID for the insured party. Please contact us for a comprehensive list of possible ‘ResidenceID’. 
•	o TypePolicyID – This is a comma-separated list of IDs for the ‘Type of Policy Types’ you would like the system to quote. The list of possible IDs can be accessed on ‘OPALS>Other Settings>Types of Policy Types’. 
•	o TypePackageID – This is the ID of the ‘Type of Package’ you would like the system to quote. Please contact us for a comprehensive list of possible ‘TypePackageID’. 
•	o Destination – The name of the destination the insured is travelling to. This needs to be the same as defined on OPALS for the products to quote. 
•	o StartDate – Insurance Start Date, using the format ‘YYYY/MM/DD’. 
•	o EndDate – Insurance End Date, using the format ‘YYYY/MM/DD’. 
•	o Travellers ▪TravellerNumber – Each Traveller’s number, e.g. 1, 2, 3, 4, … 
•	▪Title – Traveller’s Title. 
•	▪FirstName – Traveller’s Initials 
•	▪LastName – Traveller’s Surname 
•	▪DateOfBirth – Traveller’s date of birth 
•	▪Age – Traveller’s age 
•	
•	o Contact Details ▪Address – Main Person’s Address 
•	▪Postcode – Main Person’s Postcode 
•	▪Email – Main Person’s Email address 
•	▪Telephone – Main Person’s Telephone 
•	
•	

The system will then reply with a list of possible quotes that fit the criteria and products available to the user. The response will have the following information: 
•	• Message – System message with information about the result returned 
•	• quoteResults o quoteResults ▪QuoteID – Identifying ID for the quote 
•	▪schemaName – Name of the product being quoted 
•	▪policyTypeName – Name of the policy type being quoted 
•	▪SI – URL for summary of cover PDF file 
•	
•	


•	▪PW – URL for the policy wording PDF file 
•	▪Currency – Quote Currency symbol 
•	▪IPT – Quote IPT amount 
•	▪GrossPrice – Quote Price 
•	
•	

Please note that the definition for this web method can be obtained here: 
http://www.asuaonline.com/ws/integratedquote.asmx?op=ProvideQuotation 
2. Quote for Additional Covers 
If the customer requires any of the additional covers to be included in their quote, the web service can be called to update it and obtain the new price by using the ‘ProvideQuotationWithAlterations’ method. This particular web method will only allow to update an existing quote and cannot be called before obtaining a quote reference from the ‘ProvideQuotation’ web method. 
To do so, the web method should be called with the following request details, which include the quote details obtained from the ‘ProvideQuotation’ web method: 
•	• userID – The user ID to associate the quotes to and that will define the possible products to be quoted 
•	• userCode – The user code to validate the user requesting the quotes. This can be taken from user’s direct URL, available in terraCotta’s ‘Company Admin’ 
•	• quoteID – The quote ID for the selected quote to be updated. 
•	• specificQuoteDetails o AlterationID – Comma-separated list of additional cover IDs to be included in the selected quote. 
•	o Travellers ▪TravellerNumber – Each Traveller’s number, e.g. 1, 2, 3, 4, … 
•	▪Title – Traveller’s Title. 
•	▪FirstName – Traveller’s Initials 
•	▪LastName – Traveller’s Surname 
•	▪DateOfBirth – Traveller’s date of birth 
•	▪Age – Traveller’s age 
•	
•	o ContactDetails ▪Address – Main Person’s Address 
•	▪Postcode – Main Person’s Postcode 
•	▪Email – Main Person’s Email address 
•	▪Telephone – Main Person’s Telephone 
•	
•	o DynamicDetails ▪DynamicDetail_SavedValue [optional] • Position – Dynamic Detail position. 
•	• FieldName– Dynamic Detail field name to be saved. 
•	• FieldValue– Dynamic Detail value to be saved. 
•	• FieldSize– Dynamic Detail field size to be saved. 
•	
•	
•	o screeningQuestionAnswers ▪screeningQuestionAnswer [optional] • questionNumber – Number of the screening question 
•	• answer – The screening question answer (‘yes’ or ‘no’) 
•	
•	
•	


•	o EligibilityQuestionAnswers ▪eligibilityQuestionAnswer [optional] • questionNumber – Number of the eligibility question 
•	• answer – The eligibility question answer (‘yes’ or ‘no’) 
•	
•	
•	

The system will then reply with a list of possible results that fit the criteria sent. The response will have the following information: 
•	• Message – System message with information about the result returned 
•	• quoteResults o quoteResults ▪QuoteID – Identifying ID for the quote 
•	▪schemaName – Name of the product being quoted 
•	▪policyTypeName – Name of the policy type being quoted 
•	▪SI – URL for summary of cover PDF file 
•	▪PW – URL for the policy wording PDF file 
•	▪Currency – Quote Currency symbol 
•	▪IPT – Quote IPT amount 
•	▪GrossPrice – Quote Price 
•	
•	

Please note that the definition for this web method can be obtained here: 
http://www.asuaonline.com/ws/integratedquote.asmx?op=ProvideQuotationWithAlterations 
3. Obtain Screening Questions 
Once the desired additional covers have been selected by the customer, the client’s website should call the ‘ScreeningQuestions’ method to obtain the screening questions that need to be asked to the customer. 
The request requires the following information that contains the user and quote identification: 
•	• userID – The user ID used to originally request the quotes 
•	• userCode – The user code to validate the user requesting the information 
•	• quoteID – The quote ID for the selected quote 

If the request is valid, the system will return the following information that includes the screening questions, any messages to be presented for each answer and consequent action: 
•	• Message – System message with information about the result returned 
•	• screeningQuestions o screeningQuestion ▪questionNumber – Question number 
•	▪question – Screening question text 
•	▪yesMessage – Message that should be presented to the customer for a ‘Yes’ 
•	▪noMessage – Message that should be presented to the customer for a ‘No’ 
•	
•	


•	▪yesAction –ID for the action that will be taken by the system for a ‘Yes’ 
•	▪noAction – ID for the action that will be taken by the system for a ‘No’ 
•	▪yesActionText – Text for the action that will be taken by the system for a ‘Yes’ 
•	▪noActionText – Text for the action that will be taken by the system for a ‘No’ 
•	
•	

Please note that the definition for this web method can be obtained here: 
http://www.asuaonline.com/ws/integratedquote.asmx?op=ScreeningQuestions 
4. Save a quote as a Live policy 
Finally, once a quote is selected, all the insured details collected, and all the screening questions have been answered, the client’s website should call the ‘SavePolicyDetails’ to convert the quote into a live policy. 
The request for this web method will include the following information, which contains the user and quote identification and screening answers: 
•	• userID – The user ID used to originally request the quotes 
•	• userCode – The user code to validate the user requesting the information 
•	• quoteID – The quote ID for the selected quote 
•	• screeningQuestionAnswers o screeningQuestionAnswer ▪questionNumber – Number of the screening question 
•	▪answer – The screening question answer (‘yes’ or ‘no’) 
•	
•	
•	• medicalScreeningReference – Medical Screening reference (if necessary) 

The web method will validate the screening answers sent and will return the following information on the response: 
•	• Message – System message with information about the result returned 
•	• policySaved – Confirmation if the quote was converted into a policy (‘Yes’ or ‘No’) 
•	• policyID – Policy Number for the saved policy 
•	• certificate – URL for the policy certificate page 
•	• PW – URL for the policy wording PDF file 
•	• SI – URL for summary of cover PDF file 

Please note that the definition for this web method can be obtained here: 
http://www.asuaonline.com/ws/integratedquote.asmx?op=SavePolicyDetails
