{"ast":null,"code":"import _objectSpread from\"C:/Users/laptop-123/TravelInsurance_Demo_2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import'./Quote.css';// Import API service for database integration\nimport{createQuote,processPayment as apiProcessPayment}from'../services/apiService';// Import jsPDF dynamically to avoid build issues\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const generatePDF=async(formData,calculateTotalPrice,formatDateToEuropean,policyNumber)=>{try{var _formData$selectedQuo;// Dynamic import of jsPDF\nconst jsPDF=(await import('jspdf')).default;const doc=new jsPDF();const currentDate=new Date().toLocaleDateString('en-GB');// Set up fonts and styles\ndoc.setFontSize(20);doc.text('TRAVEL INSURANCE POLICY',20,20);doc.setFontSize(14);doc.text(\"Policy Number: \".concat(policyNumber),20,35);doc.text(\"Issue Date: \".concat(currentDate),20,45);let yPos=65;// Trip Information Section\ndoc.setFontSize(16);doc.text('TRIP INFORMATION',20,yPos);yPos+=15;doc.setFontSize(12);const tripType=formData.tripType==='single'?'Single Trip Insurance':formData.tripType==='annual'?'Annual Multi-Trip Insurance':'Comprehensive Single Trip Insurance';doc.text(\"Trip Type: \".concat(tripType),20,yPos);yPos+=10;doc.text(\"Destination: \".concat(formData.destination),20,yPos);yPos+=10;doc.text(\"Departure: \".concat(formatDateToEuropean(formData.startDate)),20,yPos);yPos+=10;doc.text(\"Return: \".concat(formatDateToEuropean(formData.endDate)),20,yPos);yPos+=10;doc.text(\"Travelers: \".concat(formData.numberOfTravelers),20,yPos);yPos+=20;// Traveler Information\ndoc.setFontSize(16);doc.text('TRAVELER INFORMATION',20,yPos);yPos+=15;doc.setFontSize(12);formData.travelers.forEach((traveler,index)=>{if(yPos>250){// New page if needed\ndoc.addPage();yPos=20;}doc.text(\"\".concat(index===0?'Primary Policyholder':\"Traveler \".concat(index+1),\":\"),20,yPos);yPos+=10;doc.text(\"Name: \".concat(traveler.firstName,\" \").concat(traveler.lastName),20,yPos);yPos+=8;doc.text(\"Age: \".concat(traveler.age,\" years old\"),20,yPos);yPos+=8;doc.text(\"Email: \".concat(traveler.email),20,yPos);yPos+=8;if(traveler.phone){doc.text(\"Phone: \".concat(traveler.phone),20,yPos);yPos+=8;}yPos+=10;});// Selected Plan\nif(formData.selectedQuote){if(yPos>180){doc.addPage();yPos=20;}doc.setFontSize(16);doc.text('SELECTED INSURANCE PLAN',20,yPos);yPos+=15;doc.setFontSize(12);doc.text(\"Plan: \".concat(formData.selectedQuote.name),20,yPos);yPos+=10;doc.text(\"Medical: \".concat(formData.selectedQuote.coverage.medical),20,yPos);yPos+=10;doc.text(\"Baggage: \".concat(formData.selectedQuote.coverage.baggage),20,yPos);yPos+=10;doc.text(\"Cancellation: \".concat(formData.selectedQuote.coverage.cancellation),20,yPos);yPos+=15;// Add Included Features\nif(formData.selectedQuote.features&&formData.selectedQuote.features.length>0){doc.text('Included Features:',20,yPos);yPos+=10;formData.selectedQuote.features.forEach(feature=>{if(yPos>270){// Check for page break\ndoc.addPage();yPos=20;}doc.text(\"\\u2022 \".concat(feature),25,yPos);yPos+=8;});yPos+=10;}}// Additional Coverage\nif(formData.additionalPolicies&&formData.additionalPolicies.length>0){if(yPos>220){doc.addPage();yPos=20;}doc.setFontSize(16);doc.text('ADDITIONAL COVERAGE',20,yPos);yPos+=15;doc.setFontSize(12);formData.additionalPolicies.forEach(policy=>{if(yPos>270){// Check for page break\ndoc.addPage();yPos=20;}doc.text(\"\\u2022 \".concat(policy.name,\" - \\u20AC\").concat(policy.price.toFixed(2)),25,yPos);yPos+=8;});yPos+=15;}// Premium Summary\nif(yPos>200){doc.addPage();yPos=20;}doc.setFontSize(16);doc.text('PREMIUM SUMMARY',20,yPos);yPos+=15;doc.setFontSize(12);doc.text(\"Base Premium: \\u20AC\".concat((_formData$selectedQuo=formData.selectedQuote)===null||_formData$selectedQuo===void 0?void 0:_formData$selectedQuo.price),20,yPos);yPos+=10;if(formData.additionalPolicies&&formData.additionalPolicies.length>0){const additional=formData.additionalPolicies.reduce((sum,policy)=>sum+policy.price,0);doc.text(\"Additional Policies: \\u20AC\".concat(additional.toFixed(2)),20,yPos);yPos+=10;}doc.text('Taxes & Fees: Included',20,yPos);yPos+=10;doc.text(\"Total Premium: \\u20AC\".concat(calculateTotalPrice().toFixed(2)),20,yPos);yPos+=20;doc.text('Emergency Contact: +30 6974907500',20,yPos);// Save the PDF\ndoc.save(\"Travel_Insurance_Policy_\".concat(policyNumber,\".pdf\"));}catch(error){console.error('PDF generation failed, falling back to HTML:',error);// Fallback to HTML generation if PDF fails\ngenerateHTMLPolicy(formData,calculateTotalPrice,formatDateToEuropean,policyNumber);}};const generateHTMLPolicy=(formData,calculateTotalPrice,formatDateToEuropean,policyNumber)=>{var _formData$selectedQuo2;const currentDate=new Date().toLocaleDateString('en-GB');const htmlContent=\"\\n<!DOCTYPE html>\\n<html>\\n<head>\\n    <title>Travel Insurance Policy - \".concat(policyNumber,\"</title>\\n    <style>\\n        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }\\n        .header { text-align: center; border-bottom: 2px solid #0077b6; padding-bottom: 20px; margin-bottom: 30px; }\\n        .section { margin-bottom: 25px; }\\n        .section-title { color: #0077b6; font-size: 16px; font-weight: bold; margin-bottom: 10px; }\\n        .info-row { margin: 8px 0; }\\n        .traveler-block { margin-bottom: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px; }\\n        @media print { body { margin: 0; } }\\n    </style>\\n</head>\\n<body>\\n    <div class=\\\"header\\\">\\n        <h1>TRAVEL INSURANCE POLICY</h1>\\n        <h2>Policy Number: \").concat(policyNumber,\"</h2>\\n        <p>Issue Date: \").concat(currentDate,\"</p>\\n    </div>\\n    \\n    <div class=\\\"section\\\">\\n        <div class=\\\"section-title\\\">TRIP INFORMATION</div>\\n        <div class=\\\"info-row\\\"><strong>Trip Type:</strong> \").concat(formData.tripType==='single'?'Single Trip Insurance':formData.tripType==='annual'?'Annual Multi-Trip Insurance':'Comprehensive Single Trip Insurance',\"</div>\\n        <div class=\\\"info-row\\\"><strong>Destination:</strong> \").concat(formData.destination,\"</div>\\n        <div class=\\\"info-row\\\"><strong>Departure:</strong> \").concat(formatDateToEuropean(formData.startDate),\"</div>\\n        <div class=\\\"info-row\\\"><strong>Return:</strong> \").concat(formatDateToEuropean(formData.endDate),\"</div>\\n        <div class=\\\"info-row\\\"><strong>Travelers:</strong> \").concat(formData.numberOfTravelers,\"</div>\\n    </div>\\n    \\n    <div class=\\\"section\\\">\\n        <div class=\\\"section-title\\\">TRAVELER INFORMATION</div>\\n        \").concat(formData.travelers.map((traveler,index)=>\"\\n            <div class=\\\"traveler-block\\\">\\n                <strong>\".concat(index===0?'Primary Policyholder':\"Traveler \".concat(index+1),\"</strong>\\n                <div class=\\\"info-row\\\"><strong>Name:</strong> \").concat(traveler.firstName,\" \").concat(traveler.lastName,\"</div>\\n                <div class=\\\"info-row\\\"><strong>Age:</strong> \").concat(traveler.age,\" years old</div>\\n                <div class=\\\"info-row\\\"><strong>Email:</strong> \").concat(traveler.email,\"</div>\\n                \").concat(traveler.phone?\"<div class=\\\"info-row\\\"><strong>Phone:</strong> \".concat(traveler.phone,\"</div>\"):'',\"\\n            </div>\\n        \")).join(''),\"\\n    </div>\\n    \\n    \").concat(formData.selectedQuote?\"\\n    <div class=\\\"section\\\">\\n        <div class=\\\"section-title\\\">SELECTED INSURANCE PLAN</div>\\n        <div class=\\\"info-row\\\"><strong>Plan:</strong> \".concat(formData.selectedQuote.name,\"</div>\\n        <div class=\\\"info-row\\\"><strong>Medical Coverage:</strong> \").concat(formData.selectedQuote.coverage.medical,\"</div>\\n        <div class=\\\"info-row\\\"><strong>Baggage Coverage:</strong> \").concat(formData.selectedQuote.coverage.baggage,\"</div>\\n        <div class=\\\"info-row\\\"><strong>Trip Cancellation:</strong> \").concat(formData.selectedQuote.coverage.cancellation,\"</div>\\n        \\n        \").concat(formData.selectedQuote.features&&formData.selectedQuote.features.length>0?\"\\n        <div style=\\\"margin-top: 15px;\\\">\\n            <strong>Included Features:</strong>\\n            <ul>\\n                \".concat(formData.selectedQuote.features.map(feature=>\"<li>\".concat(feature,\"</li>\")).join(''),\"\\n            </ul>\\n        </div>\\n        \"):'',\"\\n    </div>\\n    \"):'',\"\\n    \\n    \").concat(formData.additionalPolicies&&formData.additionalPolicies.length>0?\"\\n    <div class=\\\"section\\\">\\n        <div class=\\\"section-title\\\">ADDITIONAL COVERAGE</div>\\n        <ul>\\n            \".concat(formData.additionalPolicies.map(policy=>\"<li>\".concat(policy.name,\" - \\u20AC\").concat(policy.price.toFixed(2),\"</li>\")).join(''),\"\\n        </ul>\\n    </div>\\n    \"):'',\"\\n    \\n    <div class=\\\"section\\\">\\n        <div class=\\\"section-title\\\">PREMIUM SUMMARY</div>\\n        <div class=\\\"info-row\\\"><strong>Base Premium:</strong> \\u20AC\").concat((_formData$selectedQuo2=formData.selectedQuote)===null||_formData$selectedQuo2===void 0?void 0:_formData$selectedQuo2.price,\"</div>\\n        \").concat(formData.additionalPolicies&&formData.additionalPolicies.length>0?\"\\n        <div class=\\\"info-row\\\"><strong>Additional Policies:</strong> \\u20AC\".concat(formData.additionalPolicies.reduce((sum,policy)=>sum+policy.price,0).toFixed(2),\"</div>\\n        \"):'',\"\\n        <div class=\\\"info-row\\\"><strong>Taxes & Fees:</strong> Included</div>\\n        <div class=\\\"info-row\\\"><strong>Total Premium:</strong> \\u20AC\").concat(calculateTotalPrice().toFixed(2),\"</div>\\n    </div>\\n    \\n    <div class=\\\"section\\\">\\n        <div class=\\\"info-row\\\"><strong>Emergency Contact:</strong> +30 6974907500</div>\\n        <div class=\\\"info-row\\\" style=\\\"margin-top: 20px; font-style: italic;\\\">\\n            This document serves as proof of travel insurance coverage.\\n        </div>\\n    </div>\\n    \\n    <script>\\n        window.onload = function() { window.print(); };\\n        window.onafterprint = function() { window.close(); };\\n    </script>\\n</body>\\n</html>\");const printWindow=window.open('','_blank','width=800,height=600');if(printWindow){printWindow.document.write(htmlContent);printWindow.document.close();}};// Format date to European format (DD/MM/YYYY)\nconst formatDateToEuropean=dateString=>{if(!dateString)return'';const date=new Date(dateString);const day=date.getDate().toString().padStart(2,'0');const month=(date.getMonth()+1).toString().padStart(2,'0');const year=date.getFullYear();return\"\".concat(day,\"/\").concat(month,\"/\").concat(year);};const Quote=_ref=>{let{onNavigate}=_ref;const[currentPhase,setCurrentPhase]=useState(1);const[formData,setFormData]=useState({destination:'',startDate:'',endDate:'',tripType:'single',numberOfTravelers:1,travelers:[{firstName:'',lastName:'',age:'',email:'',phone:'',vaxId:'',nationality:''}],selectedQuote:null,additionalPolicies:[],paymentMethod:'card',cardNumber:'',expiryDate:'',cvv:'',billingAddress:{street:'',city:'',postalCode:'',country:''}});const[quoteOptions,setQuoteOptions]=useState([]);const[isProcessing,setIsProcessing]=useState(false);const[policyNumber,setPolicyNumber]=useState('');const[availableAdditionalPolicies]=useState([{id:'excess-waiver',name:'Excess Waiver',description:'You can avoid paying the policy excess by adding the Excess Waiver option. This means that in the event of a claim, you won\\'t have the excess deducted from the amount you are paid.',price:8.45,icon:'ðŸ›¡ï¸',category:'Protection'},{id:'cancellation-top-up',name:'Cancellation Top Up',description:'Additional cancellation coverage for enhanced protection against trip cancellation costs.',price:15.50,icon:'âŒ',category:'Cancellation'},{id:'hazardous-pursuits-cat3',name:'Hazardous Pursuits Category 3',description:'Coverage for adventure sports and activities including skiing, snowboarding, and water sports.',price:12.30,icon:'ðŸ‚',category:'Activities'},{id:'hazardous-pursuits-cat4',name:'Hazardous Pursuits Category 4',description:'Coverage for extreme sports including rock climbing, bungee jumping, and skydiving.',price:18.75,icon:'ðŸª‚',category:'Activities'},{id:'valuables',name:'Valuables',description:'Enhanced coverage for valuable items including jewelry, electronics, and expensive equipment.',price:22.40,icon:'ðŸ’Ž',category:'Protection'},{id:'golfers-extension',name:'Golfers Extension',description:'Specialized coverage for golf equipment, green fees, and golf-related incidents.',price:14.80,icon:'â›³',category:'Sports'},{id:'event-cancellation',name:'Event Cancellation',description:'Coverage for cancellation of prepaid events, concerts, or special occasions during your trip.',price:19.95,icon:'ðŸŽ«',category:'Events'},{id:'repatriation-home',name:'Repatriation Home For Australians, South Africans, And New Zealanders',description:'Special repatriation coverage for travelers from Australia, South Africa, and New Zealand.',price:25.60,icon:'âœˆï¸',category:'Repatriation'}]);useEffect(()=>{window.scrollTo({top:0,behavior:'smooth'});},[]);const generateQuoteOptions=()=>{const days=formData.startDate&&formData.endDate?Math.ceil((new Date(formData.endDate).getTime()-new Date(formData.startDate).getTime())/(1000*3600*24)):7;let basePrice=formData.tripType==='annual'?99:40;const dailyRate=formData.tripType==='annual'?0:5;const tripMultiplier=formData.tripType==='comprehensive'?1.5:1;const options=[{id:'basic',name:formData.tripType==='annual'?'Annual Basic':'Regular Basic',type:'basic',price:Math.round((basePrice+days*dailyRate)*formData.numberOfTravelers*tripMultiplier),coverage:{medical:formData.tripType==='annual'?'â‚¬5,000,000':'â‚¬2,000,000',baggage:'â‚¬1,000',cancellation:'â‚¬2,000',activities:['Standard activities']},features:['Emergency Medical Coverage','Trip Cancellation','Baggage Protection','24/7 Assistance']},{id:'standard',name:formData.tripType==='annual'?'Annual Standard':'Regular Standard',type:'standard',price:Math.round((basePrice+days*dailyRate)*1.3*formData.numberOfTravelers*tripMultiplier),coverage:{medical:formData.tripType==='annual'?'â‚¬10,000,000':'â‚¬5,000,000',baggage:'â‚¬2,500',cancellation:'â‚¬5,000',activities:['Standard activities','Adventure sports']},features:['Enhanced Medical Coverage','Trip Cancellation & Curtailment','Enhanced Baggage Protection','Adventure Sports Coverage','24/7 Assistance','Travel Delay Compensation']},{id:'premium',name:formData.tripType==='annual'?'Annual Premium':'Comprehensive Premium',type:'premium',price:Math.round((basePrice+days*dailyRate)*1.8*formData.numberOfTravelers*tripMultiplier),coverage:{medical:formData.tripType==='annual'?'â‚¬10,000,000':'â‚¬10,000,000',baggage:'â‚¬5,000',cancellation:'â‚¬10,000',activities:['All activities','Extreme sports','Winter sports']},features:['Maximum Medical Coverage','Comprehensive Trip Protection','Premium Baggage Coverage','All Sports & Activities','24/7 VIP Assistance','Travel Delay & Missed Connections','Personal Liability Coverage','Emergency Cash Advance']}];return options;};// Custom Date Picker Component\nconst CustomDatePicker=_ref2=>{let{id,value,onChange,placeholder,required}=_ref2;const[isOpen,setIsOpen]=useState(false);const[currentDate,setCurrentDate]=useState(new Date());const pickerRef=useRef(null);useEffect(()=>{const handleClickOutside=event=>{if(pickerRef.current&&!pickerRef.current.contains(event.target)){setIsOpen(false);}};if(isOpen){document.addEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[isOpen]);const generateCalendar=()=>{const year=currentDate.getFullYear();const month=currentDate.getMonth();const firstDay=new Date(year,month,1);const lastDay=new Date(year,month+1,0);const daysInMonth=lastDay.getDate();const startingDayOfWeek=firstDay.getDay();const days=[];// Add empty cells for days before the first day of the month\nfor(let i=0;i<startingDayOfWeek;i++){days.push(/*#__PURE__*/_jsx(\"div\",{className:\"calendar-day empty\"},\"empty-\".concat(i)));}// Add days of the month\nfor(let day=1;day<=daysInMonth;day++){const date=new Date(year,month,day);const dateString=date.toISOString().split('T')[0];const isSelected=value===dateString;const isToday=new Date().toDateString()===date.toDateString();days.push(/*#__PURE__*/_jsx(\"div\",{className:\"calendar-day \".concat(isSelected?'selected':'',\" \").concat(isToday?'today':''),onClick:()=>{onChange(dateString);setIsOpen(false);},children:day},day));}return days;};const navigateMonth=direction=>{setCurrentDate(new Date(currentDate.getFullYear(),currentDate.getMonth()+direction,1));};const monthNames=['January','February','March','April','May','June','July','August','September','October','November','December'];return/*#__PURE__*/_jsxs(\"div\",{className:\"custom-date-picker\",ref:pickerRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"date-input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:id,value:value?formatDateToEuropean(value):'',onChange:e=>{const formattedValue=formatDateInput(e.target.value);const isoDate=formattedValue.length===10?convertToISO(formattedValue):'';onChange(isoDate);},placeholder:placeholder,title:\"Enter date (DD/MM/YYYY) or click calendar\",pattern:\"\\\\d{2}/\\\\d{2}/\\\\d{4}\",maxLength:10,required:required}),/*#__PURE__*/_jsx(\"span\",{className:\"date-icon clickable\",onClick:()=>setIsOpen(!isOpen),title:\"Open calendar\",children:\"\\uD83D\\uDCC5\"})]}),isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-popup\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-header\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"calendar-nav-btn\",onClick:()=>navigateMonth(-1),children:\"\\u2039\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"calendar-month-year\",children:[monthNames[currentDate.getMonth()],\" \",currentDate.getFullYear()]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"calendar-nav-btn\",onClick:()=>navigateMonth(1),children:\"\\u203A\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"calendar-weekdays\",children:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].map(day=>/*#__PURE__*/_jsx(\"div\",{className:\"calendar-weekday\",children:day},day))}),/*#__PURE__*/_jsx(\"div\",{className:\"calendar-days\",children:generateCalendar()})]})]});};const handleInputChange=(field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};const handleTravelerChange=(index,field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{travelers:prev.travelers.map((traveler,i)=>i===index?_objectSpread(_objectSpread({},traveler),{},{[field]:value}):traveler)}));};const handleNumberOfTravelersChange=count=>{setFormData(prev=>{const travelers=[...prev.travelers];if(count>travelers.length){// Add new travelers\nfor(let i=travelers.length;i<count;i++){travelers.push({firstName:'',lastName:'',age:'',email:'',phone:'',vaxId:'',nationality:''});}}else if(count<travelers.length){// Remove travelers\ntravelers.splice(count);}return _objectSpread(_objectSpread({},prev),{},{numberOfTravelers:count,travelers});});};const handleBillingAddressChange=(field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{billingAddress:_objectSpread(_objectSpread({},prev.billingAddress),{},{[field]:value})}));};// Helper function to convert DD/MM/YYYY to YYYY-MM-DD for internal storage\nconst convertToISO=ddmmyyyy=>{if(!ddmmyyyy||ddmmyyyy.length!==10)return'';const[day,month,year]=ddmmyyyy.split('/');return\"\".concat(year,\"-\").concat(month.padStart(2,'0'),\"-\").concat(day.padStart(2,'0'));};// Helper function to format input as DD/MM/YYYY\nconst formatDateInput=value=>{// Remove all non-digits\nconst digits=value.replace(/\\D/g,'');// Format as DD/MM/YYYY\nif(digits.length>=8){return\"\".concat(digits.slice(0,2),\"/\").concat(digits.slice(2,4),\"/\").concat(digits.slice(4,8));}else if(digits.length>=4){return\"\".concat(digits.slice(0,2),\"/\").concat(digits.slice(2,4),\"/\").concat(digits.slice(4));}else if(digits.length>=2){return\"\".concat(digits.slice(0,2),\"/\").concat(digits.slice(2));}return digits;};const nextPhase=()=>{if(currentPhase===1){// Generate quotes when moving from phase 1 to 2\nconst options=generateQuoteOptions();setQuoteOptions(options);// Automatically pre-select the middle plan (standard)\nconst standardPlan=options.find(option=>option.type==='standard');if(standardPlan){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{selectedQuote:standardPlan}));}}if(currentPhase<7){setCurrentPhase(prev=>prev+1);window.scrollTo(0,0);}};const prevPhase=()=>{if(currentPhase>1){setCurrentPhase(prev=>prev-1);window.scrollTo(0,0);}};const selectQuote=quote=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{selectedQuote:quote}));};const addAdditionalPolicy=policy=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{additionalPolicies:[...prev.additionalPolicies,policy]}));};const removeAdditionalPolicy=policyId=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{additionalPolicies:prev.additionalPolicies.filter(p=>p.id!==policyId)}));};const calculateTotalPrice=()=>{var _formData$selectedQuo3;const basePrice=((_formData$selectedQuo3=formData.selectedQuote)===null||_formData$selectedQuo3===void 0?void 0:_formData$selectedQuo3.price)||0;const additionalPrice=formData.additionalPolicies.reduce((sum,policy)=>sum+policy.price,0);return basePrice+additionalPrice;};const generatePolicyPDF=async()=>{await generatePDF(formData,calculateTotalPrice,formatDateToEuropean,policyNumber||\"TI-\".concat(Date.now().toString().slice(-8)));};const downloadPolicyPDF=()=>{generatePolicyPDF();};const processPayment=async()=>{setIsProcessing(true);try{// First save the quote to database\nconst quoteData={destination:formData.destination,startDate:formData.startDate,endDate:formData.endDate,tripType:formData.tripType,numberOfTravelers:formData.numberOfTravelers,travelers:formData.travelers,selectedQuote:formData.selectedQuote,additionalPolicies:formData.additionalPolicies,totalAmount:calculateTotalPrice()};// console.log('Saving quote to database...', quoteData);\n// console.log('Quote data JSON string:', JSON.stringify(quoteData));\nconst quoteResponse=await createQuote(quoteData);if(quoteResponse.status==='success'&&quoteResponse.data){const quoteId=quoteResponse.data.quoteId;// Process payment\nconst paymentData={quoteId:quoteId,paymentMethod:formData.paymentMethod,cardNumber:formData.cardNumber,// Note: In production, this should be tokenized\nexpiryDate:formData.expiryDate,cvv:formData.cvv,billingAddress:formData.billingAddress,amount:calculateTotalPrice()};// console.log('Processing payment...', { ...paymentData, cardNumber: '****', cvv: '***' });\n// console.log('Payment method being sent:', formData.paymentMethod);\n// console.log('Form data payment method:', formData.paymentMethod);\nconst paymentResponse=await apiProcessPayment(paymentData);if(paymentResponse.status==='success'){var _paymentResponse$data;// console.log('Payment successful:', paymentResponse.data);\n// Store the policy number from the backend response\nif((_paymentResponse$data=paymentResponse.data)!==null&&_paymentResponse$data!==void 0&&_paymentResponse$data.policyNumber){setPolicyNumber(paymentResponse.data.policyNumber);}setIsProcessing(false);nextPhase();// Move to documents phase\n}else{throw new Error(paymentResponse.message||'Payment failed');}}else{throw new Error(quoteResponse.message||'Failed to save quote');}}catch(error){console.error('Payment processing error:',error);setIsProcessing(false);alert('Payment processing failed. Please try again. Error: '+(error instanceof Error?error.message:'Unknown error'));}};const isPhaseValid=phase=>{switch(phase){case 1:return!!(formData.destination&&formData.startDate&&formData.endDate&&formData.tripType&&formData.travelers.every(t=>t.firstName&&t.lastName&&t.age&&t.email));case 2:return!!formData.selectedQuote;case 3:return true;// Additional policies phase is always valid (optional)\ncase 4:return true;// Summary phase is always valid\ncase 5:return true;// Confirmation phase is always valid\ncase 6:const paymentValid=!!(formData.cardNumber&&formData.expiryDate&&formData.cvv&&formData.billingAddress.street&&formData.billingAddress.city&&formData.billingAddress.postalCode&&formData.billingAddress.country);return paymentValid;case 7:return true;// Documents phase is always valid\ndefault:return false;}};const renderPhase1=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"wizard-phase\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Trip Details & Traveler Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Trip Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tripType\",children:\"Trip Type\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"tripType\",value:formData.tripType,onChange:e=>handleInputChange('tripType',e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"single\",children:\"Regular Single Trip Insurance\"}),/*#__PURE__*/_jsx(\"option\",{value:\"annual\",children:\"Annual Multi-Trip Travel Insurance\"}),/*#__PURE__*/_jsx(\"option\",{value:\"comprehensive\",children:\"Comprehensive Single Trip Insurance\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"destination\",children:\"Destination\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"destination\",value:formData.destination,onChange:e=>handleInputChange('destination',e.target.value),placeholder:\"e.g., Europe, Thailand, USA\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"startDate\",children:[\"Departure Date \",/*#__PURE__*/_jsx(\"span\",{className:\"date-format-hint\",children:\"(DD/MM/YYYY)\"})]}),/*#__PURE__*/_jsx(CustomDatePicker,{id:\"startDate\",value:formData.startDate,onChange:value=>handleInputChange('startDate',value),placeholder:\"DD/MM/YYYY\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"endDate\",children:[\"Return Date \",/*#__PURE__*/_jsx(\"span\",{className:\"date-format-hint\",children:\"(DD/MM/YYYY)\"})]}),/*#__PURE__*/_jsx(CustomDatePicker,{id:\"endDate\",value:formData.endDate,onChange:value=>handleInputChange('endDate',value),placeholder:\"DD/MM/YYYY\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"numberOfTravelers\",children:\"Number of Travelers\"}),/*#__PURE__*/_jsx(\"select\",{id:\"numberOfTravelers\",value:formData.numberOfTravelers,onChange:e=>handleNumberOfTravelersChange(parseInt(e.target.value)),children:[1,2,3,4,5,6,7,8].map(num=>/*#__PURE__*/_jsxs(\"option\",{value:num,children:[num,\" Traveler\",num>1?'s':'']},num))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Traveler Information\"}),formData.travelers.map((traveler,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"traveler-info\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Traveler \",index+1]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName-\".concat(index),children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"firstName-\".concat(index),value:traveler.firstName,onChange:e=>handleTravelerChange(index,'firstName',e.target.value),placeholder:\"Enter first name\",title:\"Enter the traveler's first name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName-\".concat(index),children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lastName-\".concat(index),value:traveler.lastName,onChange:e=>handleTravelerChange(index,'lastName',e.target.value),placeholder:\"Enter last name\",title:\"Enter the traveler's last name\",required:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"age-\".concat(index),children:\"Travellers Age\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"age-\".concat(index),value:traveler.age,onChange:e=>handleTravelerChange(index,'age',e.target.value),placeholder:\"Enter age\",title:\"Enter the traveler's age (1-120)\",min:\"1\",max:\"120\",required:true})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email-\".concat(index),children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email-\".concat(index),value:traveler.email,onChange:e=>handleTravelerChange(index,'email',e.target.value),placeholder:\"Enter email address\",title:\"Enter the traveler's email address\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone-\".concat(index),children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"phone-\".concat(index),value:traveler.phone,onChange:e=>handleTravelerChange(index,'phone',e.target.value),placeholder:\"+30 123 456 7890\",title:\"Enter the traveler's phone number\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"vaxId-\".concat(index),children:\"VAX ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"vaxId-\".concat(index),value:traveler.vaxId,onChange:e=>handleTravelerChange(index,'vaxId',e.target.value),placeholder:\"Enter VAX ID\",title:\"Enter the traveler's VAX ID (optional)\"})]})]},index))]})]});const renderPhase2=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"wizard-phase\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Choose Your Insurance Plan\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Select the coverage that best fits your travel needs.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"quote-options\",children:quoteOptions.map(option=>{var _formData$selectedQuo4,_formData$selectedQuo5,_formData$selectedQuo6,_formData$selectedQuo7;return/*#__PURE__*/_jsxs(\"div\",{className:\"quote-option \".concat(((_formData$selectedQuo4=formData.selectedQuote)===null||_formData$selectedQuo4===void 0?void 0:_formData$selectedQuo4.id)===option.id?'selected':''),onClick:()=>selectQuote(option),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quote-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:option.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"quote-price\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"price-amount\",children:[\"\\u20AC\",option.price]}),/*#__PURE__*/_jsx(\"p\",{className:\"price-period\",children:\"per trip\"})]})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"quote-features\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Medical Coverage: \",option.coverage.medical]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Baggage Coverage: \",option.coverage.baggage]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Cancellation: \",option.coverage.cancellation]}),option.features.map((feature,index)=>/*#__PURE__*/_jsx(\"li\",{children:feature},index))]}),/*#__PURE__*/_jsx(\"button\",{className:\"select-button\",\"aria-label\":((_formData$selectedQuo5=formData.selectedQuote)===null||_formData$selectedQuo5===void 0?void 0:_formData$selectedQuo5.id)===option.id?'Plan selected':\"Select \".concat(option.name,\" plan\"),title:((_formData$selectedQuo6=formData.selectedQuote)===null||_formData$selectedQuo6===void 0?void 0:_formData$selectedQuo6.id)===option.id?'This plan is currently selected':\"Choose the \".concat(option.name,\" plan\"),type:\"button\",children:((_formData$selectedQuo7=formData.selectedQuote)===null||_formData$selectedQuo7===void 0?void 0:_formData$selectedQuo7.id)===option.id?'Selected':'SELECT PLAN'})]},option.id);})})]});const renderPhase3=()=>{var _formData$selectedQuo8,_formData$selectedQuo9;return/*#__PURE__*/_jsxs(\"div\",{className:\"wizard-phase\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Enhance Your Coverage\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Add optional coverage for extra protection during your trip.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"selected-plan-summary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"current-plan\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Selected Plan\"}),formData.selectedQuote&&/*#__PURE__*/_jsxs(\"div\",{className:\"plan-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"plan-name\",children:formData.selectedQuote.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"plan-price\",children:[\"\\u20AC\",formData.selectedQuote.price]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"additional-policies\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Optional Coverage Add-ons\"}),/*#__PURE__*/_jsx(\"div\",{className:\"policies-grid\",children:availableAdditionalPolicies.map(policy=>{const isSelected=formData.additionalPolicies.some(p=>p.id===policy.id);return/*#__PURE__*/_jsxs(\"div\",{className:\"policy-card \".concat(isSelected?'selected':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"policy-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"policy-icon\",children:policy.icon}),/*#__PURE__*/_jsxs(\"div\",{className:\"policy-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:policy.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"policy-price\",children:[\"\\u20AC\",policy.price.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"policy-btn \".concat(isSelected?'remove':'add'),onClick:()=>isSelected?removeAdditionalPolicy(policy.id):addAdditionalPolicy(policy),children:isSelected?'REMOVE':'ADD'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"policy-description\",children:[/*#__PURE__*/_jsx(\"p\",{children:policy.description}),policy.id==='excess-waiver'&&/*#__PURE__*/_jsx(\"button\",{className:\"find-out-more\",onClick:()=>alert('More information about Excess Waiver coverage will be available soon.'),\"aria-label\":\"Learn more about Excess Waiver coverage\",title:\"Get more information about Excess Waiver coverage\",type:\"button\",children:\"Find out more\"})]})]},policy.id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"total-summary-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"summary-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"base-plan\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Base Plan: \",(_formData$selectedQuo8=formData.selectedQuote)===null||_formData$selectedQuo8===void 0?void 0:_formData$selectedQuo8.name]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20AC\",(_formData$selectedQuo9=formData.selectedQuote)===null||_formData$selectedQuo9===void 0?void 0:_formData$selectedQuo9.price]})]}),formData.additionalPolicies.map(policy=>/*#__PURE__*/_jsxs(\"div\",{className:\"additional-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:policy.name}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20AC\",policy.price.toFixed(2)]})]},policy.id)),/*#__PURE__*/_jsxs(\"div\",{className:\"total-line\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Total Premium:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"total-amount\",children:[\"\\u20AC\",calculateTotalPrice().toFixed(2)]})]})]})})]});};const renderPhase4=()=>{var _formData$selectedQuo0;const calculateTripDuration=()=>{if(formData.startDate&&formData.endDate){const start=new Date(formData.startDate);const end=new Date(formData.endDate);const days=Math.ceil((end.getTime()-start.getTime())/(1000*3600*24));return days;}return 0;};return/*#__PURE__*/_jsxs(\"div\",{className:\"wizard-phase\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Review Your Details\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please carefully review all information below. You can go back to make changes if needed.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"professional-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83C\\uDF0D Trip Overview\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"summary-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Insurance Type:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:formData.tripType==='single'?'Single Trip Insurance':formData.tripType==='annual'?'Annual Multi-Trip Insurance':'Comprehensive Single Trip Insurance'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Destination:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:formData.destination})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Departure Date:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:formatDateToEuropean(formData.startDate)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Return Date:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:formatDateToEuropean(formData.endDate)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Trip Duration:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[calculateTripDuration(),\" days\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Number of Travelers:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[formData.numberOfTravelers,\" \",formData.numberOfTravelers===1?'person':'people']})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDC65 Traveler Information\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content\",children:formData.travelers.map((traveler,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"traveler-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"traveler-header\",children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Primary \",index===0?'Policyholder':\"Traveler \".concat(index+1)]})}),/*#__PURE__*/_jsx(\"div\",{className:\"traveler-details\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"detail-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Full Name:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"detail-value\",children:[traveler.firstName,\" \",traveler.lastName]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Age:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"detail-value\",children:[traveler.age,\" years old\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Email Address:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:traveler.email})]}),traveler.phone&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Phone Number:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:traveler.phone})]}),traveler.vaxId&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"VAX ID:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:traveler.vaxId})]})]})})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDEE1\\uFE0F Selected Insurance Plan\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content\",children:formData.selectedQuote&&/*#__PURE__*/_jsxs(\"div\",{className:\"plan-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"plan-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:formData.selectedQuote.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"plan-price\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"price-label\",children:\"Total Premium:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"price-value\",children:[\"\\u20AC\",calculateTotalPrice().toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"coverage-overview\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Coverage Limits\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"coverage-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"coverage-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"coverage-icon\",children:\"\\uD83C\\uDFE5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"coverage-details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"coverage-type\",children:\"Medical Emergency\"}),/*#__PURE__*/_jsx(\"span\",{className:\"coverage-amount\",children:formData.selectedQuote.coverage.medical})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"coverage-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"coverage-icon\",children:\"\\uD83E\\uDDF3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"coverage-details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"coverage-type\",children:\"Baggage Protection\"}),/*#__PURE__*/_jsx(\"span\",{className:\"coverage-amount\",children:formData.selectedQuote.coverage.baggage})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"coverage-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"coverage-icon\",children:\"\\u274C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"coverage-details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"coverage-type\",children:\"Trip Cancellation\"}),/*#__PURE__*/_jsx(\"span\",{className:\"coverage-amount\",children:formData.selectedQuote.coverage.cancellation})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"features-overview\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Included Benefits\"}),/*#__PURE__*/_jsx(\"div\",{className:\"features-grid\",children:formData.selectedQuote.features.map((feature,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"feature-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"feature-check\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"span\",{className:\"feature-text\",children:feature})]},index))})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-card total-card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"total-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"total-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Base Premium:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"total-value\",children:[\"\\u20AC\",(_formData$selectedQuo0=formData.selectedQuote)===null||_formData$selectedQuo0===void 0?void 0:_formData$selectedQuo0.price]})]}),formData.additionalPolicies.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"total-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Additional Policies:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"total-value\",children:[\"\\u20AC\",formData.additionalPolicies.reduce((sum,policy)=>sum+policy.price,0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"total-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Taxes & Fees:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"total-value\",children:\"Included\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"total-row final-total\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Total Amount:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"total-value\",children:[\"\\u20AC\",calculateTotalPrice().toFixed(2)]})]})]})})})]})]});};const renderPhase5=()=>{var _formData$selectedQuo1;return/*#__PURE__*/_jsxs(\"div\",{className:\"wizard-phase\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Confirmation\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please confirm that all details are correct before proceeding to payment.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirmation-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"confirmation-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Trip:\"}),\" \",formData.destination,\" (\",formatDateToEuropean(formData.startDate),\" to \",formatDateToEuropean(formData.endDate),\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirmation-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Travelers:\"}),\" \",formData.numberOfTravelers,\" person\",formData.numberOfTravelers>1?'s':'']}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirmation-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Plan:\"}),\" \",(_formData$selectedQuo1=formData.selectedQuote)===null||_formData$selectedQuo1===void 0?void 0:_formData$selectedQuo1.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirmation-item total\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Amount:\"}),\" \\u20AC\",calculateTotalPrice().toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"terms-section\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",required:true}),/*#__PURE__*/_jsxs(\"span\",{children:[\"I agree to the \",/*#__PURE__*/_jsx(\"button\",{className:\"link-button\",onClick:()=>onNavigate===null||onNavigate===void 0?void 0:onNavigate('privacy'),style:{background:'none',border:'none',color:'#0077b6',textDecoration:'underline',cursor:'pointer'},children:\"Terms and Conditions\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",required:true}),/*#__PURE__*/_jsxs(\"span\",{children:[\"I agree to the \",/*#__PURE__*/_jsx(\"button\",{className:\"link-button\",onClick:()=>onNavigate===null||onNavigate===void 0?void 0:onNavigate('privacy'),style:{background:'none',border:'none',color:'#0077b6',textDecoration:'underline',cursor:'pointer'},children:\"Privacy Policy\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),/*#__PURE__*/_jsx(\"span\",{children:\"I would like to receive marketing emails about travel insurance offers\"})]})]})]});};const renderPhase6=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"wizard-phase\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Details\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter your payment information to complete your purchase.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payment-methods\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"div\",{className:\"payment-method-info\",children:/*#__PURE__*/_jsx(\"p\",{children:\"We accept all major credit and debit cards for secure payment processing.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Card Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cardNumber\",children:\"Card Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"cardNumber\",value:formData.cardNumber,onChange:e=>handleInputChange('cardNumber',e.target.value),placeholder:\"1234 5678 9012 3456\",title:\"Enter your 16-digit card number\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"expiryDate\",children:\"Expiry Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"expiryDate\",value:formData.expiryDate,onChange:e=>handleInputChange('expiryDate',e.target.value),placeholder:\"MM/YY\",title:\"Enter card expiry date in MM/YY format\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cvv\",children:\"CVV\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"cvv\",value:formData.cvv,onChange:e=>handleInputChange('cvv',e.target.value),placeholder:\"123\",title:\"Enter the 3-digit CVV code from the back of your card\",required:true})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"billing-address\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Billing Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"street\",children:\"Street Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"street\",value:formData.billingAddress.street,onChange:e=>handleBillingAddressChange('street',e.target.value),placeholder:\"Enter street address\",title:\"Enter your billing street address\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"city\",children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"city\",value:formData.billingAddress.city,onChange:e=>handleBillingAddressChange('city',e.target.value),placeholder:\"Enter city\",title:\"Enter your billing city\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"postalCode\",children:\"Postal Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"postalCode\",value:formData.billingAddress.postalCode,onChange:e=>handleBillingAddressChange('postalCode',e.target.value),placeholder:\"Enter postal code\",title:\"Enter your billing postal code\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"country\",children:\"Country\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"country\",value:formData.billingAddress.country,onChange:e=>handleBillingAddressChange('country',e.target.value),placeholder:\"Enter country\",title:\"Enter your billing country\",required:true})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"payment-summary\",children:/*#__PURE__*/_jsx(\"div\",{className:\"summary-item\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Total Amount: \\u20AC\",calculateTotalPrice().toFixed(2)]})})})]});const renderPhase7=()=>{var _formData$travelers$;return/*#__PURE__*/_jsxs(\"div\",{className:\"wizard-phase\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDF89 Congratulations!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your travel insurance has been successfully purchased.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"success-message\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"policy-number\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Policy Number:\"}),\" \",policyNumber||\"TI-\".concat(Date.now().toString().slice(-8))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirmation-email\",children:[\"A confirmation email has been sent to \",(_formData$travelers$=formData.travelers[0])===null||_formData$travelers$===void 0?void 0:_formData$travelers$.email]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"documents-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Documents\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"document-links\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:downloadPolicyPDF,className:\"document-link download-btn\",\"aria-label\":\"Download your policy summary as a PDF document\",title:\"Download a PDF copy of your travel insurance policy summary\",type:\"button\",children:\"\\uD83D\\uDCC4 Download Your Policy Summary (PDF)\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/Globelink_Wording_EU_V2_07.03.2025.pdf\",className:\"document-link\",download:true,children:\"\\uD83D\\uDCC4 Download Policy Certificate\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/Globelink_Wording_EU_V2_07.03.2025.pdf\",className:\"document-link\",download:true,children:\"\\uD83D\\uDCCB Download Policy Terms & Conditions\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/Globelink_Wording_EU_V2_07.03.2025.pdf\",className:\"document-link\",download:true,children:\"\\uD83C\\uDD94 Download Insurance Card\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/Globelink_Wording_EU_V2_07.03.2025.pdf\",className:\"document-link\",download:true,children:\"\\uD83D\\uDCDE Emergency Contact Information\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"next-steps\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"What's Next?\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Save your policy documents in a safe place\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Keep the emergency contact numbers with you while traveling\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Download our mobile app for easy access to your policy\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Contact us anytime at +30 6974907500 for assistance\"})]})]})]});};const renderPhaseContent=()=>{switch(currentPhase){case 1:return renderPhase1();case 2:return renderPhase2();case 3:return renderPhase3();case 4:return renderPhase4();case 5:return renderPhase5();case 6:return renderPhase6();case 7:return renderPhase7();default:return renderPhase1();}};return/*#__PURE__*/_jsx(\"div\",{className:\"quote-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wizard-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Travel Insurance Quote Wizard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"wizard-progress\",children:[1,2,3,4,5,6,7].map(phase=>/*#__PURE__*/_jsxs(\"div\",{className:\"progress-step \".concat(currentPhase>=phase?'active':'',\" \").concat(currentPhase===phase?'current':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-number\",children:phase}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-label\",children:[phase===1&&'Details',phase===2&&'Quotes',phase===3&&'Add-ons',phase===4&&'Review',phase===5&&'Confirm',phase===6&&'Payment',phase===7&&'Documents']})]},phase))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"wizard-content\",children:renderPhaseContent()}),/*#__PURE__*/_jsxs(\"div\",{className:\"wizard-navigation\",children:[currentPhase>1&&currentPhase<7&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:prevPhase,\"aria-label\":\"Go to previous step\",title:\"Go back to the previous step\",type:\"button\",children:\"Previous\"}),currentPhase<6&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:nextPhase,disabled:!isPhaseValid(currentPhase),\"aria-label\":currentPhase===5?'Proceed to payment step':'Go to next step',title:currentPhase===5?'Continue to payment details':'Continue to next step',type:\"button\",children:currentPhase===5?'Proceed to Payment':'Next'}),currentPhase===6&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:processPayment,disabled:!isPhaseValid(currentPhase)||isProcessing,\"aria-label\":isProcessing?'Processing payment, please wait':\"Pay \\u20AC\".concat(calculateTotalPrice().toFixed(2),\" for your travel insurance\"),title:isProcessing?'Payment is being processed, please wait':\"Complete payment of \\u20AC\".concat(calculateTotalPrice().toFixed(2)),type:\"button\",style:{opacity:!isPhaseValid(currentPhase)||isProcessing?0.5:1,cursor:!isPhaseValid(currentPhase)||isProcessing?'not-allowed':'pointer'},children:isProcessing?'Processing Payment...':\"Pay \\u20AC\".concat(calculateTotalPrice().toFixed(2))})}),currentPhase===7&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>window.location.href='/',\"aria-label\":\"Return to homepage\",title:\"Go back to the main homepage\",type:\"button\",children:\"Return to Homepage\"})]})]})});};export default Quote;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}